<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-colorpicker/3.4.0/css/bootstrap-colorpicker.css" integrity="sha512-HcfKB3Y0Dvf+k1XOwAD6d0LXRFpCnwsapllBQIvvLtO2KMTa0nI5MtuTv3DuawpsiA0ztTeu690DnMux/SuXJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <title>Find Me Paint</title>

    <!-- <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}"> -->
    <link rel="shortcut icon" type="image/x-icon" href="/static/images/favicon.ico">

    <style type="text/css">
      .color-tile-container {
        position: relative; 
        height: 200px;
      }
      .color-tile {
        height: 200px;
        width: 100%;
        position: absolute;
      }
      .color-search {
        height: 50px;
        width: 50px;
        position: absolute;
      }
    </style>

  </head>
  <body>

  <div class="container">

    <h1 class="mt-5">Find Me Paint</h1>
    <p class="lead">
      Convert hex color codes to paint colors!! 
      This tool uses a euclidean distance calculation within the RGB color space to find you the closest paint color.
      Read more at <a href="https://en.wikipedia.org/wiki/Color_difference">https://en.wikipedia.org/wiki/Color_difference</a>.
    </p>
    <p>
      Check out the code at
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
      </svg>
      <a href="https://github.com/sjsafranek/hex2paint">GitHub</a>. 
    </p>

    <div class="row mt-2">
      <form class="d-flex" onSubmit="return findMePaint()">

        <!-- <input id="myColor" type="color" class="form-control form-control-color me-2" value="{{default_color}}" title="Choose your color"> -->
        <div class="col-auto ms-2 me-2">
          <div id="colorInputContainer" class="input-group" value="{{default_color}}" title="Choose your color">
            <input id="colorInput" type="text" class="form-control" value="{{default_color}}" />
            <!-- <span class="input-group-append"> -->
              <span class="input-group-text colorpicker-input-addon"><i></i></span>
            <!-- </span> -->
          </div>
        </div>

        <div class="col-auto ms-2 me-2">
          {% if sources %}
          <select class="form-select form-control w-auto" multiple id="sources" size="3">
            {% for source in sources %}
            <option value="{{source}}">{{source}}</option>
            {% endfor %}
          </select>
          {% endif %}
        </div>

        <div class="col-auto ms-4">
          <button type="submit" class="btn btn-primary">Find me paint!!</button>
        </div>

      </form>
    </div>

    {% if colors %}
    <div class="row mt-4">
      {% for color in colors %}
      <div class="col-auto">
        <div class="card mb-4" style="width: 18rem;">
        <!-- <div class="card"> -->
          <div class="card-body">
            <div class="color-tile-container">
              <div class="color-tile" style="background-color: {{color['color_hex']}}"></div>
              <div class="color-search"style="background-color: {{default_color}}"></div>
            </div>
            <h5 class="card-title">
                {{ color['name'].title() }} ({{ color['code'] }})
            </h5>
            <h6>
              {{color['source']}}
            </h6>
            <p class="card-text">
              {{color['distance']}}<br>
              <a href="{{color['link']}}" target="_blank">link</a>
            </p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    {% endif %}

  </div>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-colorpicker/3.4.0/js/bootstrap-colorpicker.min.js" integrity="sha512-94dgCw8xWrVcgkmOc2fwKjO4dqy/X3q7IjFru6MHJKeaAzCvhkVtOS6S+co+RbcZvvPBngLzuVMApmxkuWZGwQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


  <script>

    $(document).ready(function() {
      // https://itsjavi.com/bootstrap-colorpicker/tutorial-Basics.html
      $('#colorInputContainer').colorpicker({
        format: 'auto',
        autoInputFallback: false,
        autoHexInputFallback: false,
      });
    });

    function findMePaint() {
      let _hexCode = document.getElementById("colorInput").value.replace("#", "");
      let _sourcesFilter = $('#sources').val().join(',');
      window.location.assign('/' + _hexCode + '?sources=' + _sourcesFilter);
      return false;
    }

  </script>


  </body>
</html>